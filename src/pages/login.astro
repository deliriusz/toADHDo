---
import AuthLayout from "../layouts/AuthLayout.astro";
import LoginForm from "../components/auth/LoginForm";
import { Alert, AlertDescription } from "@/components/ui/alert";

// Check if redirected from successful registration
const registered = Astro.url.searchParams.get("registered") === "true";
---

<AuthLayout>
  <div class="space-y-6">
    <div class="space-y-2 text-center">
      <h1 class="text-2xl font-semibold tracking-tight">Sign In</h1>
      <p class="text-sm text-muted-foreground">Enter your credentials to access your account</p>
    </div>

    {
      registered && (
        <Alert className="bg-green-50 border-green-600 dark:bg-green-900/20 dark:border-green-600">
          <AlertDescription>Registration successful! You can now sign in with your credentials.</AlertDescription>
        </Alert>
      )
    }

    <LoginForm client:load />

    <div class="text-center text-sm">
      <p class="text-muted-foreground">
        Don't have an account?{" "}
        <a href="/register" class="font-medium text-primary hover:underline"> Sign up </a>
      </p>
      <p class="mt-2 text-muted-foreground">
        <a href="/forgot-password" class="font-medium text-primary hover:underline"> Forgot your password? </a>
      </p>
    </div>
  </div>
</AuthLayout>
